# 7.21工作日报

10:15/19:15

10:20-11:30	确定单腿工作空间，验证逆运动学精度
11:30-12:30	考虑在算法中加入PID
14:00-16:00	验证姿态控制正确性，调试bug
16:00-17:00	编写身体运动（x,y,z,roll,pitch,yaw）测试demo
17:00-18:00	基于PID开发自平衡功能(pitch, yaw)
18:30-19:00	基于PID开发自平衡功能(pitch, yaw)
19:00-20:00	培训

在GoalPosAll()或singleLegCtrl()中加入安全角度设置
加入yaw的原地控制（磁力计积分）

单腿画圆，没问题
但是抖动有点厉害，可能在算法上要做平滑（无冲击），也可能来源于link等长度计算不准确（单腿逆运动学处）

先看微雪里平衡是怎么实现的（roll对应肩关节，pitch对应脚的高低，yaw做不了）

PID结果作为控制量，每次控制相对量

![image-20220721120037037](/home/maoyuxuan/.config/Typora/typora-user-images/image-20220721120037037.png)

矩阵赋值有问题
矩阵和向量不能混用，改成vector

无倾角的ok

三角函数保留为两位小数，精度是否足够？应该是print保留了2位小数

legnum从1开始还是从0开始可以优化

全局角度方向需要统一

![image-20220721151858576](/home/maoyuxuan/.config/Typora/typora-user-images/image-20220721151858576.png)这里不能两个都用i

都缩起来了，单腿运动学还是有点问题

肩关节计算有问题

四条腿坐标系中，只有左右两边有对称，没有前后对称（直接平移前腿）

左右平移没问题
